<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ê°•ì¢Œ ê´€ë¦¬ - ë°”ë¡œêµìœ¡ ê´€ë¦¬ì</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- AdminLTE -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap4.min.css">
    <!-- Korean Font -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .content-wrapper {
            background: #f4f4f4;
        }
        .card {
            box-shadow: 0 0 1px rgba(0,0,0,.125), 0 1px 3px rgba(0,0,0,.2);
            border-radius: .25rem;
        }
        .brand-link {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .sidebar-dark-primary .nav-sidebar > .nav-item > .nav-link.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .course-thumbnail {
            width: 60px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
        }
        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        .status-published {
            background: #d4edda;
            color: #155724;
        }
        .status-draft {
            background: #f8d7da;
            color: #721c24;
        }
        .course-price {
            font-weight: 600;
            color: #007bff;
        }
        .course-rating {
            color: #ffc107;
        }
        
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ ê°œì„  */
        .modal-content {
            border-radius: 12px;
            border: none;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }
        
        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px 12px 0 0;
            padding: 20px 30px;
            border-bottom: none;
        }
        
        .modal-header .modal-title {
            font-weight: 600;
            font-size: 1.5rem;
        }
        
        .modal-header .close {
            color: white;
            opacity: 0.8;
            font-size: 1.5rem;
            text-shadow: none;
        }
        
        .modal-header .close:hover {
            opacity: 1;
            color: white;
        }
        
        .modal-body {
            padding: 30px;
            background: #f8f9fa;
        }
        
        .modal-footer {
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            padding: 20px 30px;
            border-radius: 0 0 12px 12px;
        }
        
        /* ê¸°ì¡´ í¼ í•„ë“œ ìŠ¤íƒ€ì¼ (ì•„ë˜ ì„¹ì…˜ì—ì„œ ì¬ì •ì˜ë¨) */
        
        .form-control {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 0.95rem;
            line-height: 1.5;
            height: 48px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
        
        .form-control::placeholder {
            color: #6c757d;
            opacity: 0.8;
        }
        
        /* TextareaëŠ” ë†’ì´ ìë™ ì¡°ì • */
        textarea.form-control {
            height: auto;
            min-height: 100px;
            resize: vertical;
        }
        
        /* Select ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ê°œì„  */
        select.form-control {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
            appearance: none;
        }
        
        .custom-file-label {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 12px 16px;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            height: 48px;
            display: flex;
            align-items: center;
            line-height: 1.5;
            background-color: #fff;
        }
        
        .custom-file-label:hover {
            background-color: #f8f9fa;
            border-color: #ccc;
        }
        
        .custom-file-input:focus ~ .custom-file-label {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
        
        .custom-file-label::after {
            content: "Browse";
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            z-index: 3;
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: #495057;
            background-color: #e9ecef;
            border-left: 1px solid #e0e0e0;
            border-radius: 0 8px 8px 0;
            font-weight: 500;
        }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ ê°œì„  */
        .btn {
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: #6c757d;
            border: none;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        /* ì§„í–‰ë°” ìŠ¤íƒ€ì¼ ê°œì„  */
        .progress {
            border-radius: 10px;
            height: 8px;
            background-color: #e9ecef;
        }
        
        .progress-bar {
            border-radius: 10px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }
        
        /* ì•Œë¦¼ ìŠ¤íƒ€ì¼ ê°œì„  */
        .alert {
            border-radius: 8px;
            border: none;
            padding: 12px 16px;
            font-size: 0.9rem;
        }
        
        .alert-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            color: #0d47a1;
        }
        
        .alert-success {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            color: #2e7d32;
        }
        
        /* í¼ ì„¹ì…˜ êµ¬ë¶„ */
        .form-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #f0f0f0;
        }
        
        .form-section-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.15rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .form-section-title i {
            color: #667eea;
        }
        
        /* í¼ ê·¸ë£¹ ê°„ê²© ì¡°ì • */
        .form-group {
            margin-bottom: 1.8rem;
        }
        
        .form-group:last-child {
            margin-bottom: 0;
        }
        
        /* ë¼ë²¨ ìŠ¤íƒ€ì¼ ê°œì„  */
        .form-group label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
        }
        
        .form-group label i {
            color: #667eea;
            width: 16px;
        }
        
        /* ë„ì›€ë§ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ê°œì„  */
        .form-text {
            margin-top: 6px;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .text-muted {
            color: #6c757d !important;
        }
        
        /* ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ê°œì„  */
        .form-check {
            padding: 12px 0;
            display: flex;
            align-items: center;
        }
        
        .form-check-input {
            width: 18px;
            height: 18px;
            margin-top: 0;
            margin-right: 8px;
            position: static;
        }
        
        .form-check-label {
            font-weight: 500;
            color: #495057;
            margin-bottom: 0;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        /* ë¬´ë£Œ ê°•ì¢Œ ì²´í¬ë°•ìŠ¤ ê°„ë‹¨í•˜ê²Œ */
        .simple-check {
            margin-top: 8px;
            margin-left: 15px;
        }
        
        /* ë°˜ì‘í˜• ê°œì„  */
        @media (max-width: 768px) {
            .modal-dialog {
                margin: 10px;
            }
            
            .modal-body {
                padding: 20px;
            }
            
            .modal-footer {
                padding: 15px 20px;
            }
        }
    </style>
</head>
<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <!-- ì™¼ìª½ ë„¤ë¹„ê²Œì´ì…˜ -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button">
                        <i class="fas fa-bars"></i>
                    </a>
                </li>
            </ul>

            <!-- ì˜¤ë¥¸ìª½ ë„¤ë¹„ê²Œì´ì…˜ -->
            <ul class="navbar-nav ml-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-user"></i>
                        <span class="ml-1" id="admin-name">ê´€ë¦¬ì</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-user mr-2"></i> í”„ë¡œí•„
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" onclick="logoutUser()">
                            <i class="fas fa-sign-out-alt mr-2"></i> ë¡œê·¸ì•„ì›ƒ
                        </a>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- ë©”ì¸ ì‚¬ì´ë“œë°” -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- ë¸Œëœë“œ ë¡œê³  -->
            <a href="index.html" class="brand-link">
                <img src="../images/logo.png" alt="ë°”ë¡œêµìœ¡" class="brand-image img-circle elevation-3" style="opacity: .8">
                <span class="brand-text font-weight-light">ë°”ë¡œêµìœ¡ ê´€ë¦¬ì</span>
            </a>

            <!-- ì‚¬ì´ë“œë°” -->
            <div class="sidebar">
                <!-- ì‚¬ì´ë“œë°” ë©”ë‰´ -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <i class="nav-icon fas fa-tachometer-alt"></i>
                                <p>ëŒ€ì‹œë³´ë“œ</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="users.html" class="nav-link">
                                <i class="nav-icon fas fa-users"></i>
                                <p>ì‚¬ìš©ì ê´€ë¦¬</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="courses.html" class="nav-link active">
                                <i class="nav-icon fas fa-book"></i>
                                <p>ê°•ì¢Œ ê´€ë¦¬</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="reviews.html" class="nav-link">
                                <i class="nav-icon fas fa-star"></i>
                                <p>í›„ê¸° ê´€ë¦¬</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="payments.html" class="nav-link">
                                <i class="nav-icon fas fa-credit-card"></i>
                                <p>ê²°ì œ ê´€ë¦¬</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="statistics.html" class="nav-link">
                                <i class="nav-icon fas fa-chart-pie"></i>
                                <p>í†µê³„</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="settings.html" class="nav-link">
                                <i class="nav-icon fas fa-cogs"></i>
                                <p>ì„¤ì •</p>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- ì½˜í…ì¸  ë˜í¼ -->
        <div class="content-wrapper">
            <!-- ì½˜í…ì¸  í—¤ë” -->
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0">ê°•ì¢Œ ê´€ë¦¬</h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="index.html">í™ˆ</a></li>
                                <li class="breadcrumb-item active">ê°•ì¢Œ ê´€ë¦¬</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë©”ì¸ ì½˜í…ì¸  -->
            <section class="content">
                <div class="container-fluid">
                    <!-- ê°•ì¢Œ ëª©ë¡ ì¹´ë“œ -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ê°•ì¢Œ ëª©ë¡</h3>
                            <div class="card-tools">
                                <button type="button" class="btn btn-primary btn-sm" onclick="showAddCourseModal()">
                                    <i class="fas fa-plus"></i> ìƒˆ ê°•ì¢Œ ì¶”ê°€
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table id="courses-table" class="table table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th>ì¸ë„¤ì¼</th>
                                            <th>ì œëª©</th>
                                            <th>ê°•ì‚¬</th>
                                            <th>ì¹´í…Œê³ ë¦¬</th>
                                            <th>ê°€ê²©</th>
                                            <th>í‰ì </th>
                                            <th>ìˆ˜ê°•ìƒ</th>
                                            <th>ì˜ìƒ</th>
                                            <th>ìƒíƒœ</th>
                                            <th>ìƒì„±ì¼</th>
                                            <th>ì‘ì—…</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- ë™ì ìœ¼ë¡œ ë¡œë“œë¨ -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- í‘¸í„° -->
        <footer class="main-footer">
            <strong>Copyright &copy; 2024 ë°”ë¡œêµìœ¡.</strong>
            All rights reserved.
            <div class="float-right d-none d-sm-inline-block">
                <b>Version</b> 1.0.0
            </div>
        </footer>
    </div>

    <!-- ê°•ì¢Œ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div class="modal fade" id="course-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-title">ê°•ì¢Œ ì¶”ê°€</h4>
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                                     <form id="course-form">
                    <div class="modal-body">
                        <input type="hidden" id="course-id">
                        
                        <!-- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-info-circle mr-2"></i>ê¸°ë³¸ ì •ë³´
                            </div>
                            
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <label for="course-title">ê°•ì¢Œ ì œëª© *</label>
                                        <input type="text" class="form-control" id="course-title" required 
                                               placeholder="ì˜ˆ: SNS ë§ˆì¼€íŒ… ë§ˆìŠ¤í„° í´ë˜ìŠ¤">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="course-status">ìƒíƒœ</label>
                                        <select class="form-control" id="course-status">
                                            <option value="draft">ì„ì‹œì €ì¥</option>
                                            <option value="published">ê²Œì‹œ</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="course-instructor">ê°•ì‚¬ëª… *</label>
                                        <input type="text" class="form-control" id="course-instructor" required 
                                               placeholder="ì˜ˆ: ê¹€ë§ˆì¼€íŒ…">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="course-category">ì¹´í…Œê³ ë¦¬</label>
                                        <select class="form-control" id="course-category">
                                            <option value="marketing">ë§ˆì¼€íŒ…</option>
                                            <option value="branding">ë¸Œëœë“œ</option>
                                            <option value="development">ì°½ì—…</option>
                                            <option value="crm">CRM</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="course-description">ìƒì„¸ ì„¤ëª…</label>
                                <textarea class="form-control" id="course-description" rows="4" 
                                          placeholder="ê°•ì¢Œì˜ ëª©í‘œ, ë‚´ìš©, ìˆ˜ê°• ëŒ€ìƒ ë“±ì„ ìì„¸íˆ ì„¤ëª…í•´ì£¼ì„¸ìš”."></textarea>
                            </div>
                        </div>

                        <!-- ê°€ê²© ë° ì˜µì…˜ ì„¹ì…˜ -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-won-sign mr-2"></i>ê°€ê²© ë° ì˜µì…˜
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="course-price">
                                            <i class="fas fa-won-sign mr-2"></i>ê°€ê²© (ì›)
                                        </label>
                                        <input type="number" class="form-control" id="course-price" min="0" 
                                               placeholder="99000">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="course-difficulty">
                                            <i class="fas fa-layer-group mr-2"></i>ë‚œì´ë„
                                        </label>
                                        <select class="form-control" id="course-difficulty">
                                            <option value="beginner">ì´ˆê¸‰</option>
                                            <option value="intermediate">ì¤‘ê¸‰</option>
                                            <option value="advanced">ê³ ê¸‰</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ë¬´ë£Œ ê°•ì¢Œ ì˜µì…˜ -->
                            <div class="simple-check">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="course-is-free">
                                    <label class="form-check-label" for="course-is-free">
                                        ë¬´ë£Œ ê°•ì¢Œë¡œ ì„¤ì •
                                    </label>
                                </div>
                                <small class="text-muted ml-4">
                                    ì²´í¬í•˜ë©´ ê°€ê²©ì´ ë¬´ì‹œë˜ê³  ë¬´ë£Œ ê°•ì¢Œë¡œ ë“±ë¡ë©ë‹ˆë‹¤.
                                </small>
                            </div>
                        </div>

                        <!-- ë¯¸ë””ì–´ íŒŒì¼ ì„¹ì…˜ -->
                        <div class="form-section">
                            <div class="form-section-title">
                                <i class="fas fa-photo-video mr-2"></i>ë¯¸ë””ì–´ íŒŒì¼
                            </div>
                            

                            <!-- ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
                            <div class="form-group">
                                <label for="course-thumbnail">
                                    <i class="fas fa-image mr-2"></i>ì¸ë„¤ì¼ ì´ë¯¸ì§€
                                </label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="course-thumbnail" accept="image/*">
                                    <label class="custom-file-label" for="course-thumbnail">ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”</label>
                                </div>
                                <small class="form-text text-muted">
                                    <i class="fas fa-info-circle mr-1"></i>
                                    ì§€ì› í˜•ì‹: JPG, PNG, GIF (ìµœëŒ€ 5MB) - ê°•ì¢Œ ëª©ë¡ì— í‘œì‹œë  ëŒ€í‘œ ì´ë¯¸ì§€ì…ë‹ˆë‹¤.
                                </small>
                            </div>
                            
                            

                            <!-- ì˜ìƒ íŒŒì¼ ì—…ë¡œë“œ -->
                            <div class="form-group">
                                <label for="course-video">
                                    <i class="fas fa-video mr-2"></i>ì˜ìƒ íŒŒì¼ ì—…ë¡œë“œ
                                </label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="course-video" accept="video/mp4,video/webm,video/avi,video/mov">
                                    <label class="custom-file-label" for="course-video">ì˜ìƒ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”</label>
                                </div>
                                <small class="form-text text-muted">
                                    <i class="fas fa-info-circle mr-1"></i>
                                    ì§€ì› í˜•ì‹: MP4, WebM, AVI, MOV (ìµœëŒ€ 100MB) - 50MB ì´ìƒ íŒŒì¼ì€ ìë™ ì••ì¶•ë©ë‹ˆë‹¤.
                                </small>
                            </div>
                            
                            <!-- ì—…ë¡œë“œ ì§„í–‰ë¥  -->
                            <div class="progress mt-2" id="upload-progress" style="display: none;">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%">
                                    <span class="sr-only">0% ì™„ë£Œ</span>
                                </div>
                            </div>
                            
                            <!-- ì••ì¶• ìƒíƒœ -->
                            <div class="alert alert-info mt-2" id="compression-status" style="display: none;">
                                <i class="fas fa-compress-arrows-alt mr-2"></i>ì˜ìƒ ì••ì¶• ì¤‘... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.
                            </div>
                            
                            <!-- ì—…ë¡œë“œ ì„±ê³µ ìƒíƒœ -->
                            <div class="alert alert-success mt-2" id="upload-success" style="display: none;">
                                <i class="fas fa-check-circle mr-2"></i>ì˜ìƒ ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
                            </div>

                            <div class="form-group mt-3">
                                <label for="course-video-url">ì˜ìƒ URL (ì§ì ‘ ì…ë ¥)</label>
                                <input type="url" class="form-control" id="course-video-url" 
                                       placeholder="https://example.com/video.mp4">
                                <small class="form-text text-muted">ë˜ëŠ” ê¸°ì¡´ ì˜ìƒ URLì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”</small>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="d-flex justify-content-between align-items-center w-100">
                            <div>
                                <small class="text-muted">* í•„ìˆ˜ ì…ë ¥ í•­ëª©</small>
                            </div>
                            <div>
                                <button type="button" class="btn btn-secondary mr-2" data-dismiss="modal">
                                    <i class="fas fa-times mr-1"></i>ì·¨ì†Œ
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save mr-1"></i>ì €ì¥
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE -->
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
    <!-- DataTables -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- FFmpeg.js for video compression -->
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.js"></script>
    
    <script>
        // ===============================
        // Supabase ì„¤ì • (ì¸ë¼ì¸ìœ¼ë¡œ ëª¨ë“  ì½”ë“œ í¬í•¨)
        // ===============================
        const SUPABASE_URL = 'https://bjsstktiiniigdnsdwsr.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJqc3N0a3RpaW5paWdkbnNkd3NyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1MDI4MTEsImV4cCI6MjA2NzA3ODgxMX0.h3W1Q3L_yX8_HPOMmEluq2Qum_INJSCv9OKV4IZdYRs';
        
        const ADMIN_EMAILS = [
            'admin@baroedu.com',
            'manager@baroedu.com', 
            'test@baroedu.com'
        ];

        // Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // ===============================
        // ì „ì—­ ë³€ìˆ˜
        // ===============================
        let coursesTable = null;
        let currentUser = null;
        let ffmpeg = null;
        let uploadedVideoUrl = null;
        let uploadedThumbnailUrl = null;

        // ===============================
        // ì „ì—­ í•¨ìˆ˜ë“¤ (ëª¨ë‹¬ ë° ì•¡ì…˜)
        // ===============================
        
        // ìƒˆ ê°•ì¢Œ ì¶”ê°€ ëª¨ë‹¬ í‘œì‹œ
        function showAddCourseModal() {
            console.log('ğŸ”µ ìƒˆ ê°•ì¢Œ ì¶”ê°€ ëª¨ë‹¬ ì—´ê¸°');
            try {
                document.getElementById('modal-title').textContent = 'ìƒˆ ê°•ì¢Œ ì¶”ê°€';
                document.getElementById('course-form').reset();
                document.getElementById('course-id').value = '';
                
                // íŒŒì¼ ì…ë ¥ ë¼ë²¨ ì´ˆê¸°í™”
                const videoFileLabel = document.querySelector('#course-video').parentElement.querySelector('.custom-file-label');
                const thumbnailFileLabel = document.querySelector('#course-thumbnail').parentElement.querySelector('.custom-file-label');
                if (videoFileLabel) {
                    videoFileLabel.textContent = 'ì˜ìƒ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”';
                }
                if (thumbnailFileLabel) {
                    thumbnailFileLabel.textContent = 'ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”';
                }
                
                // ìƒíƒœ UI ì´ˆê¸°í™”
                hideUploadProgress();
                hideCompressionStatus();
                hideUploadSuccess();
                
                // ì—…ë¡œë“œ ë³€ìˆ˜ ì´ˆê¸°í™”
                uploadedVideoUrl = null;
                uploadedThumbnailUrl = null;
                
                $('#course-modal').modal('show');
                console.log('âœ… ëª¨ë‹¬ ì—´ê¸° ì„±ê³µ');
            } catch (error) {
                console.error('âŒ ëª¨ë‹¬ ì—´ê¸° ì—ëŸ¬:', error);
                alert('ëª¨ë‹¬ì„ ì—¬ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì˜ìƒ ì¬ìƒ
        function playVideo(videoUrl) {
            if (!videoUrl) {
                alert('ì˜ìƒ URLì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            window.open(videoUrl, '_blank', 'width=800,height=600');
        }

        // ê°•ì¢Œ ìƒì„¸ë³´ê¸°
        function viewCourse(courseId) {
            alert('ê°•ì¢Œ ìƒì„¸ë³´ê¸° ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }

        // ê°•ì¢Œ ìˆ˜ì •
        function editCourse(courseId) {
            alert('ê°•ì¢Œ ìˆ˜ì • ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }

        // ê°•ì¢Œ ì‚­ì œ
        function deleteCourse(courseId) {
            if (confirm('ì •ë§ë¡œ ì´ ê°•ì¢Œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert('ê°•ì¢Œ ì‚­ì œ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
            }
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logoutUser() {
            if (confirm('ì •ë§ë¡œ ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                try {
                    supabase.auth.signOut();
                    sessionStorage.clear();
                    localStorage.clear();
                    window.location.href = 'login.html';
                } catch (error) {
                    console.error('ë¡œê·¸ì•„ì›ƒ ì—ëŸ¬:', error);
                    window.location.href = 'login.html';
                }
            }
        }

        // ===============================
        // ì˜ìƒ íŒŒì¼ ì²˜ë¦¬ í•¨ìˆ˜ë“¤
        // ===============================
        
        // FFmpeg ì´ˆê¸°í™”
        async function initFFmpeg() {
            try {
                if (ffmpeg) return ffmpeg;
                
                // ë™ì ìœ¼ë¡œ FFmpeg ë¡œë“œ
                const { FFmpeg } = await import('https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.7/dist/esm/index.js');
                const { fetchFile, toBlobURL } = await import('https://cdn.jsdelivr.net/npm/@ffmpeg/util@0.12.1/dist/esm/index.js');
                
                ffmpeg = new FFmpeg();
                
                const baseURL = 'https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/esm';
                await ffmpeg.load({
                    coreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, 'text/javascript'),
                    wasmURL: await toBlobURL(`${baseURL}/ffmpeg-core.wasm`, 'application/wasm'),
                    workerURL: await toBlobURL(`${baseURL}/ffmpeg-core.worker.js`, 'text/javascript')
                });
                
                console.log('âœ… FFmpeg ì´ˆê¸°í™” ì™„ë£Œ');
                return ffmpeg;
            } catch (error) {
                console.error('âŒ FFmpeg ì´ˆê¸°í™” ì—ëŸ¬:', error);
                return null;
            }
        }

        // ì˜ìƒ ì••ì¶•
        async function compressVideo(file) {
            try {
                console.log('ğŸ”„ ì˜ìƒ ì••ì¶• ì‹œì‘:', file.name);
                
                const ffmpegInstance = await initFFmpeg();
                if (!ffmpegInstance) {
                    throw new Error('FFmpeg ì´ˆê¸°í™” ì‹¤íŒ¨');
                }

                const { fetchFile } = await import('https://cdn.jsdelivr.net/npm/@ffmpeg/util@0.12.1/dist/esm/index.js');
                
                // ì…ë ¥ íŒŒì¼ ë“±ë¡
                await ffmpegInstance.writeFile('input.mp4', await fetchFile(file));
                
                // ì••ì¶• ì˜µì…˜ ì„¤ì • (720p, H.264, CRF 23)
                await ffmpegInstance.exec([
                    '-i', 'input.mp4',
                    '-c:v', 'libx264',
                    '-crf', '23',
                    '-preset', 'medium',
                    '-vf', 'scale=-2:720',
                    '-c:a', 'aac',
                    '-b:a', '128k',
                    'output.mp4'
                ]);
                
                // ì••ì¶•ëœ íŒŒì¼ ì½ê¸°
                const data = await ffmpegInstance.readFile('output.mp4');
                const compressedBlob = new Blob([data.buffer], { type: 'video/mp4' });
                
                // íŒŒì¼ ì •ë¦¬
                await ffmpegInstance.deleteFile('input.mp4');
                await ffmpegInstance.deleteFile('output.mp4');
                
                console.log(`âœ… ì˜ìƒ ì••ì¶• ì™„ë£Œ: ${file.size} â†’ ${compressedBlob.size} bytes`);
                return compressedBlob;
            } catch (error) {
                console.error('âŒ ì˜ìƒ ì••ì¶• ì—ëŸ¬:', error);
                throw error;
            }
        }

        // Supabase Storageì— ì˜ìƒ ì—…ë¡œë“œ
        async function uploadVideoToStorage(file, fileName) {
            try {
                console.log('ğŸ”„ Supabase Storageì— ì—…ë¡œë“œ ì‹œì‘:', fileName);
                
                const { data, error } = await supabase.storage
                    .from('course-videos')
                    .upload(fileName, file, {
                        cacheControl: '3600',
                        upsert: true
                    });

                if (error) {
                    throw error;
                }

                // ê³µê°œ URL ìƒì„±
                const { data: { publicUrl } } = supabase.storage
                    .from('course-videos')
                    .getPublicUrl(fileName);

                console.log('âœ… ì—…ë¡œë“œ ì™„ë£Œ:', publicUrl);
                return publicUrl;
            } catch (error) {
                console.error('âŒ ì—…ë¡œë“œ ì—ëŸ¬:', error);
                throw error;
            }
        }

        // ì˜ìƒ íŒŒì¼ ì²˜ë¦¬ (ì••ì¶• + ì—…ë¡œë“œ)
        async function processVideoFile(file) {
            try {
                const maxSize = 100 * 1024 * 1024; // 100MB
                const shouldCompress = file.size > 50 * 1024 * 1024; // 50MB ì´ìƒ ì‹œ ì••ì¶•
                
                // UI ì—…ë°ì´íŠ¸
                showUploadProgress(0);
                
                // íŒŒì¼ í¬ê¸° ì²´í¬
                if (file.size > maxSize) {
                    showCompressionStatus('íŒŒì¼ í¬ê¸°ê°€ 100MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤. ì••ì¶•ì„ ì‹œë„í•©ë‹ˆë‹¤.');
                }

                let processedFile = file;

                // ì••ì¶• í•„ìš” ì‹œ ì••ì¶• ì‹¤í–‰
                if (shouldCompress) {
                    try {
                        showCompressionStatus('ì˜ìƒ ì••ì¶• ì¤‘...');
                        processedFile = await compressVideo(file);
                        hideCompressionStatus();
                        
                        // ì••ì¶• í›„ì—ë„ í¬ê¸°ê°€ í´ ê²½ìš°
                        if (processedFile.size > maxSize) {
                            throw new Error('ì••ì¶• í›„ì—ë„ íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤.');
                        }
                    } catch (compressError) {
                        console.warn('ì••ì¶• ì‹¤íŒ¨, ì›ë³¸ íŒŒì¼ ì‚¬ìš©:', compressError);
                        hideCompressionStatus();
                        processedFile = file;
                    }
                }

                // Supabase Storageì— ì—…ë¡œë“œ
                showUploadProgress(50);
                
                const fileName = `video_${Date.now()}_${Math.random().toString(36).substr(2, 9)}.mp4`;
                const videoUrl = await uploadVideoToStorage(processedFile, fileName);
                
                showUploadProgress(100);
                uploadedVideoUrl = videoUrl;
                
                // ì„±ê³µ ìƒíƒœ í‘œì‹œ
                showUploadSuccess();
                setTimeout(() => {
                    hideUploadProgress();
                }, 1000);
                
                return videoUrl;
            } catch (error) {
                console.error('âŒ ì˜ìƒ íŒŒì¼ ì²˜ë¦¬ ì—ëŸ¬:', error);
                hideUploadProgress();
                hideCompressionStatus();
                throw error;
            }
        }

        // UI í—¬í¼ í•¨ìˆ˜ë“¤
        function showUploadProgress(percent) {
            const progressDiv = document.getElementById('upload-progress');
            const progressBar = progressDiv.querySelector('.progress-bar');
            
            progressDiv.style.display = 'block';
            progressBar.style.width = percent + '%';
            progressBar.textContent = percent + '%';
        }

        function hideUploadProgress() {
            document.getElementById('upload-progress').style.display = 'none';
        }

        function showCompressionStatus(message) {
            const statusDiv = document.getElementById('compression-status');
            statusDiv.style.display = 'block';
            statusDiv.querySelector('i').nextSibling.textContent = ' ' + message;
        }

        function hideCompressionStatus() {
            document.getElementById('compression-status').style.display = 'none';
        }

        function showUploadSuccess() {
            document.getElementById('upload-success').style.display = 'block';
        }

        function hideUploadSuccess() {
            document.getElementById('upload-success').style.display = 'none';
        }

        // ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì—…ë¡œë“œ
        async function uploadThumbnailToStorage(file, fileName) {
            try {
                console.log('ğŸ”„ ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œì‘:', fileName);
                
                const { data, error } = await supabase.storage
                    .from('course-thumbnails')
                    .upload(fileName, file, {
                        cacheControl: '3600',
                        upsert: true
                    });

                if (error) {
                    throw error;
                }

                // ê³µê°œ URL ìƒì„±
                const { data: { publicUrl } } = supabase.storage
                    .from('course-thumbnails')
                    .getPublicUrl(fileName);

                console.log('âœ… ì¸ë„¤ì¼ ì—…ë¡œë“œ ì™„ë£Œ:', publicUrl);
                return publicUrl;
            } catch (error) {
                console.error('âŒ ì¸ë„¤ì¼ ì—…ë¡œë“œ ì—ëŸ¬:', error);
                throw error;
            }
        }

        // ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì²˜ë¦¬
        async function processThumbnailFile(file) {
            try {
                const maxSize = 5 * 1024 * 1024; // 5MB
                
                // íŒŒì¼ í¬ê¸° ì²´í¬
                if (file.size > maxSize) {
                    throw new Error('ì¸ë„¤ì¼ ì´ë¯¸ì§€ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
                }

                // ì´ë¯¸ì§€ íŒŒì¼ í˜•ì‹ ì²´í¬
                const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
                if (!allowedTypes.includes(file.type)) {
                    throw new Error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤. (JPG, PNG, GIF, WebPë§Œ ì§€ì›)');
                }

                // Supabase Storageì— ì—…ë¡œë“œ
                const fileName = `thumbnail_${Date.now()}_${Math.random().toString(36).substr(2, 9)}.${file.type.split('/')[1]}`;
                const thumbnailUrl = await uploadThumbnailToStorage(file, fileName);
                
                uploadedThumbnailUrl = thumbnailUrl;
                
                return thumbnailUrl;
            } catch (error) {
                console.error('âŒ ì¸ë„¤ì¼ ì²˜ë¦¬ ì—ëŸ¬:', error);
                throw error;
            }
        }

        // ===============================
        // ì¸ì¦ ê´€ë ¨ í•¨ìˆ˜ë“¤
        // ===============================
        
        // ì¸ì¦ í™•ì¸
        async function checkAuth() {
            try {
                console.log('ğŸ”µ ì¸ì¦ í™•ì¸ ì‹œì‘');
                
                const { data: { user } } = await supabase.auth.getUser();
                if (!user) {
                    console.log('âŒ ì‚¬ìš©ì ì—†ìŒ');
                    throw new Error('ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤.');
                }

                // ê´€ë¦¬ì ì´ë©”ì¼ í™•ì¸
                if (!ADMIN_EMAILS.includes(user.email.toLowerCase())) {
                    console.log('âŒ ê´€ë¦¬ì ê¶Œí•œ ì—†ìŒ:', user.email);
                    throw new Error('ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
                }

                console.log('âœ… ì¸ì¦ ì„±ê³µ:', user.email);
                currentUser = user;
                return user;
                
            } catch (error) {
                console.error('âŒ ì¸ì¦ ì—ëŸ¬:', error);
                return null;
            }
        }

        // ===============================
        // ê°•ì¢Œ ê´€ë¦¬ í•¨ìˆ˜ë“¤
        // ===============================
        
        // ê°•ì¢Œ í…Œì´ë¸” ì´ˆê¸°í™”
        async function initCoursesTable() {
            try {
                if (coursesTable) {
                    coursesTable.destroy();
                }

                coursesTable = $('#courses-table').DataTable({
                    responsive: true,
                    language: {
                        "search": "ê²€ìƒ‰:",
                        "lengthMenu": "_MENU_ ê°œì”© ë³´ê¸°",
                        "info": "_START_ì—ì„œ _END_ê¹Œì§€ (ì´ _TOTAL_ê°œ)",
                        "paginate": {
                            "first": "ì²˜ìŒ",
                            "last": "ë§ˆì§€ë§‰",
                            "next": "ë‹¤ìŒ",
                            "previous": "ì´ì „"
                        },
                        "emptyTable": "ê°•ì¢Œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.",
                        "zeroRecords": "ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤."
                    },
                    pageLength: 25,
                    order: [[9, 'desc']],
                    columnDefs: [
                        { targets: [0, 7, 10], orderable: false },
                        { targets: [4], className: 'text-right' },
                        { targets: [5, 6, 7], className: 'text-center' },
                        { targets: [9], type: 'date' }
                    ]
                });
                
                console.log('âœ… ê°•ì¢Œ í…Œì´ë¸” ì´ˆê¸°í™” ì™„ë£Œ');
            } catch (error) {
                console.error('ê°•ì¢Œ í…Œì´ë¸” ì´ˆê¸°í™” ì—ëŸ¬:', error);
            }
        }

        // ê°•ì¢Œ ëª©ë¡ ë¡œë“œ
        async function loadCourses() {
            try {
                console.log('ğŸ”„ ê°•ì¢Œ ëª©ë¡ ë¡œë“œ ì¤‘...');
                
                const { data: courses, error } = await supabase
                    .from('courses')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) {
                    console.warn('ê°•ì¢Œ ëª©ë¡ ì¡°íšŒ ì—ëŸ¬:', error);
                    displaySampleCourses();
                    return;
                }

                if (coursesTable) {
                    coursesTable.clear();
                    
                    if (courses && courses.length > 0) {
                        courses.forEach(course => {
                            const row = createCourseRow(course);
                            coursesTable.row.add(row);
                        });
                    }
                    
                    coursesTable.draw();
                }
                
                console.log(`âœ… ê°•ì¢Œ ${courses?.length || 0}ê°œ ë¡œë“œ ì™„ë£Œ`);
            } catch (error) {
                console.error('ê°•ì¢Œ ëª©ë¡ ë¡œë“œ ì—ëŸ¬:', error);
                displaySampleCourses();
            }
        }

        // ìƒ˜í”Œ ê°•ì¢Œ ë°ì´í„° í‘œì‹œ
        function displaySampleCourses() {
            if (!coursesTable) return;

            const realCourses = [
                {
                    id: '1',
                    title: 'SNS ë§ˆì¼€íŒ… ë§ˆìŠ¤í„°',
                    instructor_name: 'ê¹€ë§ˆì¼€íŒ…',
                    category_id: 'marketing',
                    price: 99000,
                    rating: 4.8,
                    total_students: 150,
                    status: 'published',
                    thumbnail_url: '../images/pd1.jpg',
                    video_url: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
                    created_at: '2024-01-15T10:30:00Z'
                },
                {
                    id: '2',
                    title: 'AI ìƒì„¸í˜ì´ì§€ ìµœì í™”',
                    instructor_name: 'ì´ë””ìì¸',
                    category_id: 'branding',
                    price: 0,
                    is_free: true,
                    rating: 4.5,
                    total_students: 89,
                    status: 'published',
                    thumbnail_url: '../images/pd2.jpg',
                    video_url: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
                    created_at: '2024-01-10T15:45:00Z'
                },
                {
                    id: '3',
                    title: 'ë°”ì´ëŸ´ ì½˜í…ì¸  ê¸°ì´ˆë¶€í„° ì‹¤ì „',
                    instructor_name: 'ë°•ë°”ì´ëŸ´',
                    category_id: 'marketing',
                    price: 149000,
                    rating: 4.9,
                    total_students: 203,
                    status: 'published',
                    thumbnail_url: '../images/pd3.jpg',
                    video_url: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
                    created_at: '2024-01-08T11:20:00Z'
                },
                {
                    id: '4',
                    title: 'ì‡¼í•‘ëª° ì°½ì—… A to Z',
                    instructor_name: 'ìµœì°½ì—…',
                    category_id: 'development',
                    price: 199000,
                    rating: 4.7,
                    total_students: 132,
                    status: 'published',
                    thumbnail_url: '../images/pd4.jpg',
                    video_url: null,
                    created_at: '2024-01-05T14:20:00Z'
                },
                {
                    id: '5',
                    title: 'ê³ ê° ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•',
                    instructor_name: 'ì •ì‹œìŠ¤í…œ',
                    category_id: 'crm',
                    price: 129000,
                    rating: 4.6,
                    total_students: 78,
                    status: 'published',
                    thumbnail_url: '../images/pd11.jpg',
                    video_url: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
                    created_at: '2024-01-03T09:15:00Z'
                }
            ];

            coursesTable.clear();
            realCourses.forEach(course => {
                const row = createCourseRow(course);
                coursesTable.row.add(row);
            });
            coursesTable.draw();

            showToast('ì‹¤ì œ ë°”ë¡œêµìœ¡ ê°•ì¢Œ ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.', 'success');
        }

        // ê°•ì¢Œ í–‰ ìƒì„±
        function createCourseRow(course) {
            const thumbnail = course.thumbnail_url ? 
                `<img src="${course.thumbnail_url}" alt="ì¸ë„¤ì¼" class="course-thumbnail">` : 
                `<div class="course-thumbnail bg-secondary d-flex align-items-center justify-content-center">
                    <i class="fas fa-book text-white"></i>
                </div>`;
            
            const title = course.title || 'ì œëª© ì—†ìŒ';
            const instructor = course.instructor_name || 'ê°•ì‚¬ ë¯¸ì •';
            const category = getCategoryName(course.category_id);
            const price = (course.is_free || course.price === 0) ? 
                '<span class="badge badge-success">ë¬´ë£Œ</span>' :
                `<span class="course-price">${Number(course.price).toLocaleString()}ì›</span>`;
            
            const rating = course.rating ? 
                `<span class="course-rating">
                    <i class="fas fa-star"></i> ${course.rating}
                </span>` : 
                '<span class="text-muted">í‰ê°€ ì—†ìŒ</span>';
            
            const students = course.total_students || 0;
            
            const video = course.video_url ? 
                `<button class="btn btn-success btn-sm" onclick="playVideo('${course.video_url}')" title="ì˜ìƒ ì¬ìƒ">
                    <i class="fas fa-play"></i>
                </button>` : 
                '<span class="text-muted">ì˜ìƒ ì—†ìŒ</span>';
            
            const status = course.status === 'published' ? 
                '<span class="badge badge-success">ê²Œì‹œ</span>' : 
                '<span class="badge badge-warning">ì„ì‹œì €ì¥</span>';
            
            const createdAt = course.created_at ? formatDate(course.created_at) : 'ë‚ ì§œ ì—†ìŒ';
            
            const actions = `
                <div class="btn-group btn-group-sm">
                    <button class="btn btn-info" onclick="viewCourse('${course.id}')" title="ìƒì„¸ë³´ê¸°">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-warning" onclick="editCourse('${course.id}')" title="ìˆ˜ì •">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-danger" onclick="deleteCourse('${course.id}')" title="ì‚­ì œ">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;

            return [thumbnail, title, instructor, category, price, rating, students, video, status, createdAt, actions];
        }

        // ===============================
        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        // ===============================
        
        // ì¹´í…Œê³ ë¦¬ ì´ë¦„ ë³€í™˜
        function getCategoryName(categoryId) {
            const categories = {
                'marketing': 'ë§ˆì¼€íŒ…',
                'branding': 'ë¸Œëœë“œ',
                'development': 'ì°½ì—…',
                'crm': 'CRM'
            };
            return categories[categoryId] || categoryId || 'ê¸°íƒ€';
        }

        // ë‚ ì§œ í¬ë§·íŒ…
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ko-KR');
        }

        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
        function showToast(message, type = 'success') {
            const existingToast = document.getElementById('courses-toast');
            if (existingToast) {
                existingToast.remove();
            }

            const toast = document.createElement('div');
            toast.id = 'courses-toast';
            toast.className = `alert alert-${type === 'error' ? 'danger' : type} position-fixed`;
            toast.style.cssText = `
                top: 20px;
                right: 20px;
                z-index: 9999;
                min-width: 300px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            toast.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-triangle' : 'info-circle'} mr-2"></i>
                    <span>${message}</span>
                    <button type="button" class="close ml-auto" onclick="this.parentElement.parentElement.remove()">
                        <span>&times;</span>
                    </button>
                </div>
            `;

            document.body.appendChild(toast);

            setTimeout(() => {
                if (toast && toast.parentNode) {
                    toast.remove();
                }
            }, 3000);
        }

        // ===============================
        // í¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        // ===============================
        
        // ë¯¸ë””ì–´ íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        function addMediaEventListeners() {
            // ì˜ìƒ íŒŒì¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            const videoInput = document.getElementById('course-video');
            const videoFileLabel = videoInput?.parentElement.querySelector('.custom-file-label');
            
            if (videoInput && videoFileLabel) {
                videoInput.addEventListener('change', async function(e) {
                    const file = e.target.files[0];
                    if (!file) return;

                    try {
                        // íŒŒì¼ëª… í‘œì‹œ
                        videoFileLabel.textContent = file.name;
                        
                        // ìƒíƒœ ì´ˆê¸°í™”
                        hideUploadProgress();
                        hideCompressionStatus();
                        hideUploadSuccess();
                        
                        // ì˜ìƒ íŒŒì¼ ì²˜ë¦¬ (ì••ì¶• + ì—…ë¡œë“œ)
                        const videoUrl = await processVideoFile(file);
                        
                        // ì—…ë¡œë“œëœ URLì„ inputì— ì €ì¥
                        document.getElementById('course-video-url').value = videoUrl;
                        
                        console.log('âœ… ì˜ìƒ ì—…ë¡œë“œ ì™„ë£Œ:', videoUrl);
                    } catch (error) {
                        console.error('âŒ ì˜ìƒ íŒŒì¼ ì²˜ë¦¬ ì—ëŸ¬:', error);
                        alert('ì˜ìƒ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                        
                        // ì—ëŸ¬ ì‹œ íŒŒì¼ëª… ì´ˆê¸°í™”
                        videoFileLabel.textContent = 'ì˜ìƒ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”';
                        videoInput.value = '';
                    }
                });
            }

            // ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            const thumbnailInput = document.getElementById('course-thumbnail');
            const thumbnailFileLabel = thumbnailInput?.parentElement.querySelector('.custom-file-label');
            
            if (thumbnailInput && thumbnailFileLabel) {
                thumbnailInput.addEventListener('change', async function(e) {
                    const file = e.target.files[0];
                    if (!file) return;

                    try {
                        // íŒŒì¼ëª… í‘œì‹œ
                        thumbnailFileLabel.textContent = file.name;
                        
                        // ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì²˜ë¦¬
                        const thumbnailUrl = await processThumbnailFile(file);
                        
                        console.log('âœ… ì¸ë„¤ì¼ ì—…ë¡œë“œ ì™„ë£Œ:', thumbnailUrl);
                        
                        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                        showToast('ì¸ë„¤ì¼ ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                        
                    } catch (error) {
                        console.error('âŒ ì¸ë„¤ì¼ ì²˜ë¦¬ ì—ëŸ¬:', error);
                        alert('ì¸ë„¤ì¼ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                        
                        // ì—ëŸ¬ ì‹œ íŒŒì¼ëª… ì´ˆê¸°í™”
                        thumbnailFileLabel.textContent = 'ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”';
                        thumbnailInput.value = '';
                    }
                });
            }
        }
        
        // í¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        function addFormEventListeners() {
            const courseForm = document.getElementById('course-form');
            if (courseForm) {
                courseForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    try {
                        // ì˜ìƒ ì—…ë¡œë“œ í™•ì¸
                        const videoUrlInput = document.getElementById('course-video-url').value;
                        const videoFile = document.getElementById('course-video').files[0];
                        
                        if (videoFile && !videoUrlInput) {
                            alert('ì˜ìƒ ì—…ë¡œë“œê°€ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. ì™„ë£Œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                            return;
                        }
                        
                        // ë¬´ë£Œ ê°•ì¢Œì¸ ê²½ìš° ê°€ê²©ì„ 0ìœ¼ë¡œ ì„¤ì •
                        const isFree = document.getElementById('course-is-free').checked;
                        const priceValue = isFree ? 0 : (parseInt(document.getElementById('course-price').value) || 0);
                        
                        // ì‹¤ì œ í…Œì´ë¸” êµ¬ì¡°ì— ë§ëŠ” ë°ì´í„° êµ¬ì„±
                        const courseData = {
                            title: document.getElementById('course-title').value,
                            instructor_name: document.getElementById('course-instructor').value,
                            category_id: document.getElementById('course-category').value,
                            difficulty: document.getElementById('course-difficulty').value,
                            price: priceValue,
                            is_free: isFree,
                            description: document.getElementById('course-description').value,
                            thumbnail_url: uploadedThumbnailUrl || null,
                            video_url: videoUrlInput || uploadedVideoUrl || null,
                            status: document.getElementById('course-status').value
                        };

                        const courseId = document.getElementById('course-id').value;
                        
                        if (courseId) {
                            const { data, error } = await supabase
                                .from('courses')
                                .update(courseData)
                                .eq('id', courseId);

                            if (error) {
                                throw new Error(`ê°•ì¢Œ ìˆ˜ì • ì—ëŸ¬: ${error.message}`);
                            }

                            showToast('ê°•ì¢Œê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                        } else {
                            const { data, error } = await supabase
                                .from('courses')
                                .insert([courseData]);

                            if (error) {
                                throw new Error(`ê°•ì¢Œ ì¶”ê°€ ì—ëŸ¬: ${error.message}`);
                            }

                            showToast('ìƒˆ ê°•ì¢Œê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                        }
                        
                        // í¼ ì´ˆê¸°í™”
                        document.getElementById('course-form').reset();
                        const videoFileLabel = document.querySelector('#course-video').parentElement.querySelector('.custom-file-label');
                        const thumbnailFileLabel = document.querySelector('#course-thumbnail').parentElement.querySelector('.custom-file-label');
                        if (videoFileLabel) videoFileLabel.textContent = 'ì˜ìƒ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”';
                        if (thumbnailFileLabel) thumbnailFileLabel.textContent = 'ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”';
                        uploadedVideoUrl = null;
                        uploadedThumbnailUrl = null;
                        
                        // ìƒíƒœ UI ì´ˆê¸°í™”
                        hideUploadProgress();
                        hideCompressionStatus();
                        hideUploadSuccess();
                        
                        $('#course-modal').modal('hide');
                        await loadCourses();
                        
                    } catch (error) {
                        console.error('ê°•ì¢Œ ì €ì¥ ì—ëŸ¬:', error);
                        showToast(`ê°•ì¢Œ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
                    }
                });
            }
        }

        // ===============================
        // í˜ì´ì§€ ì´ˆê¸°í™”
        // ===============================
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                console.log('ğŸ”µ í˜ì´ì§€ ë¡œë“œ ì‹œì‘');
                
                // ì¸ì¦ í™•ì¸
                const user = await checkAuth();
                
                if (user) {
                    console.log('âœ… ì¸ì¦ëœ ì‚¬ìš©ì:', user.email);
                    document.getElementById('admin-name').textContent = user.email || 'ê´€ë¦¬ì';
                    await initCoursesPage();
                } else {
                    console.log('âŒ ì¸ì¦ ì‹¤íŒ¨ - ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™');
                    window.location.href = 'login.html';
                }
                
            } catch (error) {
                console.error('âŒ í˜ì´ì§€ ì´ˆê¸°í™” ì—ëŸ¬:', error);
                window.location.href = 'login.html';
            }
        });

        // ê°•ì¢Œ ê´€ë¦¬ í˜ì´ì§€ ì´ˆê¸°í™”
        async function initCoursesPage() {
            try {
                console.log('ğŸ”µ ê°•ì¢Œ ê´€ë¦¬ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
                await initCoursesTable();
                await loadCourses();
                addFormEventListeners();
                addMediaEventListeners();
                console.log('âœ… ê°•ì¢Œ ê´€ë¦¬ í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ');
            } catch (error) {
                console.error('âŒ ê°•ì¢Œ ê´€ë¦¬ í˜ì´ì§€ ì´ˆê¸°í™” ì—ëŸ¬:', error);
                showToast('ê°•ì¢Œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ===============================
        // ì „ì—­ í•¨ìˆ˜ ë…¸ì¶œ (window ê°ì²´ì— ë“±ë¡)
        // ===============================
        
        // ëª¨ë“  í•¨ìˆ˜ë¥¼ ì „ì—­ìœ¼ë¡œ ë…¸ì¶œ
        window.showAddCourseModal = showAddCourseModal;
        window.playVideo = playVideo;
        window.viewCourse = viewCourse;
        window.editCourse = editCourse;
        window.deleteCourse = deleteCourse;
        window.logoutUser = logoutUser;
        
        console.log('âœ… ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
    </script>
</body>
</html> 